<!doctype html><html lang="en"><head>    <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="A Web Interface to the Manifestoproject Classifier">    <title>Inofficial &ndash; Manifesto &ndash; Project &ndash; Classifier</title>	<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">	<link rel="stylesheet" href="layout/pure-blog.css"></head><body><div id="layout" class="pure-g">    <div class="sidebar pure-u-1 pure-u-md-1-4">        <div class="header">            <h1 class="brand-title">FYPI</h1>            <h2 class="brand-tagline">Automatisierte Politische Text Analyse</h2>            <nav class="nav">                <ul class="nav-list">                    <li class="nav-item">                        <a class="pure-button" href="webInterface.html">Web Interface</a>                    </li>                    <li class="nav-item">                        <a class="pure-button" href="news.html">Zeitungs Analysen</a>                    </li>                </ul>            </nav>        </div>    </div>    <div class="content pure-u-1 pure-u-md-3-4">        <div>            <!-- A wrapper for all the blog posts -->         <div class="posts">                <h1 class="content-subhead">Analysiere Text</h1>        Hier Text reinpasten: <input class="pure-form" type="text" id="textBox" value="Sicherheit">        <button class="pure-button" onclick="visualize()">Analysiere</button>        <p id=result></p>            </div>        	<div class="posts">            <h1 class="content-subhead">Analysiere Text hinter einem Weblink</h1>            </div>            <div class="footer">                <div class="pure-menu pure-menu-horizontal">                    <ul>                        <li class="pure-menu-item"><a href="http://purecss.io/" class="pure-menu-link">About</a></li>                        <li class="pure-menu-item"><a href="https://github.com/kirel/political-affiliation-prediction" class="pure-menu-link">About</a></li>                        <li class="pure-menu-item"><a href="https://manifestoproject.wzb.eu/" class="pure-menu-link">Manifestoproject</a></li>                    </ul>                </div>            </div>        </div>    </div></div><script type="text/javascript" src="javascript/d3.js"></script><script type="text/javascript">var width = 200,    height = 200,    radius = Math.min(width, height) / 2,    padding = 1;    var circleWidth = 60;    var outerRadius = width / 2;    var innerRadius = outerRadius - circleWidth;    var pie = d3.layout.pie().value(function(d) { return d.prediction; }).sort(null);    var domain = [        "Economy",        "External Relations",        "Fabric of Society",        "Freedom and Democracy",        "Political System",        "Welfare and Quality of Life"    ];    var leftright = ["left","right"]    var initialData = {"leftright":leftright,"domain":domain}    var colors = {                "leftright":function (i){c = ["#FF0000", "#100000"];return c[i]},                "domain":d3.scale.category10()                };    var arcs = {            "leftright":d3.svg.arc()                    .innerRadius(0)                    .outerRadius(innerRadius-padding),            "domain":d3.svg.arc()                    .innerRadius(innerRadius+padding)                    .outerRadius(outerRadius)                };    var svg = d3.select("#result").append("svg")        .attr("width", width)        .attr("height", height)    setup();    function uniformData(size) {        return Array.apply(null, Array(size)).map(function(){return 1.0/size})    }    function obj2FieldsValues(obj) {            var fields = Object.keys(obj)            var vals = fields.map(function(key) {return obj[key]});            return {fields:fields,values:vals}    }    function obj2Tuples(obj) {        return Object.keys(obj).map(function (key) {return [key,obj[key]]});    }    function setup(){        for (arc in arcs){            data = uniformData(initialData[arc].length)            labels = initialData[arc]            svg.append("g").attr("class",arc)                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")            svg.selectAll("g."+arc).selectAll("path")                .data(pie(data))              .enter().append("path").attr("class", arc)                .attr("fill", function(d, i) { return colors[arc](i); })                .attr("d", arcs[arc])                .each(function(d) { this._current = d; })                .append("svg:title")                          .text(function(d,i){return tipString(labels[i],data[i]);})        }    }    function tipString(txt,prediction){return txt+": "+ Math.round(prediction*100.0)/100;}    // Store the currently-displayed angles in this._current.    // Then, interpolate from this._current to the new angles.    function arcTween(c,a,arcc) {        var i = d3.interpolate(c, a);        c = i(0);        return function(t) {            return arcc(i(t));        };    }     function updateArc(text,arcid){        data = obj2FieldsValues(text[arcid]).values        labels = obj2FieldsValues(text[arcid]).fields            //Clean groups and set up new groups            svg.selectAll("path."+arcid)                .data(pie(data))                .transition().duration(750).attrTween("d", function(d){                    return arcTween(this._current,d,arcs[arcid])})                .select("title").text(function(d,i){return tipString(labels[i],data[i]);})    } function drawArc(text,arcid) { } function visualizeit(queryText){        d3.json("/api/predict")            .header("Content-type", "application/x-www-form-urlencoded")            .post("text="+queryText, function(error, prediction) {		for (arcid in aspects) svg.select("result").select("g."+aspects[arcid])		.data(aspects).enter().append("g").attr("class",aspects[arcid])                .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")		svg.selectAll("path."+arcid)				.data(pie(data))				.enter()            svg.selectAll("g."+arc).selectAll("path")                .data(pie(data))              .enter().append("path").attr("class", arc)                .attr("fill", function(d, i) { return colors[arc](i); })                .attr("d", arcs[arc])                .each(function(d) { this._current = d; })                .append("svg:title")                          .text(function(d,i){return tipString(labels[i],data[i]);})            })    }    function visualize(){        var queryText = document.getElementById("textBox").value        d3.json("/api/predict")            .header("Content-type", "application/x-www-form-urlencoded")            .post("text="+queryText, function(error, currentPrediction) {            for (arc in arcs){ updateArc(currentPrediction,arc);}            })    }</script></body></html>